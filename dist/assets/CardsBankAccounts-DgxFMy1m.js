import{u as L,r as t,w as x,a as l,j as e,L as h,C as I,b as P,c as z,B as b,D as H,d as q,e as c,P as w,f as R,g as Y,h as M,i as O,k as G,l as o,I as i,m as J,S as k,n as K,o as Q,p as U,q as V,s as W,T as X}from"./index-CXBYwn_y.js";function ee(){const{i18n:A}=L(),a=A.language==="ar",[N,g]=t.useState([]),[C,f]=t.useState(!0),[D,d]=t.useState(!1),[Z,B]=t.useState(!1),[_,S]=t.useState(null),[j,p]=t.useState(!1),[y,v]=t.useState(null),[r,n]=t.useState({bankName:"",accountName:"",accountNumber:"",iban:"",isDefault:!1}),m=t.useCallback(async()=>{try{f(!0);const s=await x.getBankAccounts();g(Array.isArray(s)?s:[])}catch(s){console.error("Failed to load bank accounts:",s),l.error(a?"فشل تحميل الحسابات البنكية":"Failed to load bank accounts")}finally{f(!1)}},[a]);t.useEffect(()=>{m()},[m]);const F=async()=>{if(!r.bankName||!r.accountName||!r.accountNumber){l.error(a?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields");return}p(!0);try{await x.addBankAccount(r),l.success(a?"تم إضافة الحساب البنكي بنجاح":"Bank account added successfully"),d(!1),n({bankName:"",accountName:"",accountNumber:"",iban:"",isDefault:!1}),m()}catch(s){console.error("Failed to add bank account:",s),l.error(a?"فشل إضافة الحساب البنكي":"Failed to add bank account")}finally{p(!1)}},E=async s=>{if(confirm(a?"هل أنت متأكد من حذف هذا الحساب البنكي؟":"Are you sure you want to delete this bank account?")){v(s);try{await x.deleteBankAccount(s),g(u=>u.filter(T=>T.id!==s)),l.success(a?"تم حذف الحساب البنكي":"Bank account deleted")}catch(u){console.error("Failed to delete bank account:",u),l.error(a?"فشل حذف الحساب البنكي":"Failed to delete bank account")}finally{v(null)}}};return C?e.jsx("div",{className:"min-h-[500px] flex items-center justify-center",dir:a?"rtl":"ltr",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-8",children:[e.jsx(h,{className:"h-12 w-12 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:a?"جاري التحميل...":"Loading..."})]})}):e.jsx("div",{className:"w-full max-w-4xl mx-auto p-4 md:p-6",dir:a?"rtl":"ltr",children:e.jsxs(I,{className:"bg-card border-border/50 shadow-xl overflow-hidden",children:[e.jsxs(P,{className:"border-b border-border/50 bg-muted/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 via-transparent to-accent/5 opacity-50"}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs(z,{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-primary/10 border border-primary/20 shadow-sm",children:e.jsx(b,{className:"w-6 h-6 text-primary"})}),a?"حساباتي البنكية":"My Bank Accounts"]}),e.jsxs(H,{open:D,onOpenChange:d,children:[e.jsx(q,{asChild:!0,children:e.jsxs(c,{className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-primary-foreground shadow-lg shadow-primary/20",children:[e.jsx(w,{className:"h-5 w-5 mr-2"}),a?"إضافة حساب جديد":"Add New Account"]})}),e.jsxs(R,{className:"max-w-lg",children:[e.jsxs(Y,{children:[e.jsxs(M,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(O,{className:"w-6 h-6 text-primary"}),a?"إضافة حساب بنكي جديد":"Add New Bank Account"]}),e.jsx(G,{children:a?"أدخل بيانات حسابك البنكي لاستخدامه في عمليات الشحن":"Enter your bank account details for top-up operations"})]}),e.jsxs("div",{className:"space-y-5 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{children:[a?"اسم البنك":"Bank Name"," *"]}),e.jsx(i,{value:r.bankName,onChange:s=>n({...r,bankName:s.target.value}),placeholder:a?"مثال: البنك الأهلي السعودي":"e.g., Al Ahli Bank"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{children:[a?"اسم صاحب الحساب":"Account Holder Name"," *"]}),e.jsx(i,{value:r.accountName,onChange:s=>n({...r,accountName:s.target.value}),placeholder:a?"الاسم كما يظهر في الحساب":"Name as shown on the account"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{children:[a?"رقم الحساب":"Account Number"," *"]}),e.jsx(i,{value:r.accountNumber,onChange:s=>n({...r,accountNumber:s.target.value}),placeholder:a?"أدخل رقم الحساب":"Enter account number",className:"font-mono",dir:"ltr"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:a?"رقم الآيبان (IBAN)":"IBAN Number"}),e.jsx(i,{value:r.iban||"",onChange:s=>n({...r,iban:s.target.value}),placeholder:"SA00 0000 0000 0000 0000 0000",className:"font-mono",dir:"ltr"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted/30 rounded-xl border border-border/50",children:[e.jsx(J,{id:"isDefault",checked:r.isDefault,onCheckedChange:s=>n({...r,isDefault:s})}),e.jsxs(o,{htmlFor:"isDefault",className:"cursor-pointer flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-amber-500"}),a?"تعيين كحساب افتراضي":"Set as default account"]})]})]}),e.jsxs(K,{className:"gap-2",children:[e.jsx(c,{variant:"outline",onClick:()=>d(!1),children:a?"إلغاء":"Cancel"}),e.jsx(c,{onClick:F,disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"h-4 w-4 mr-2 animate-spin"}),a?"جاري الإضافة...":"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),a?"إضافة الحساب":"Add Account"]})})]})]})]})]})]}),e.jsx(U,{className:"p-6",children:N.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"p-6 rounded-2xl bg-muted/30 inline-block mb-6 border border-border/50",children:e.jsx(b,{className:"h-16 w-16 text-muted-foreground/50"})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:a?"لا توجد حسابات بنكية":"No Bank Accounts"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:a?"لم تقم بإضافة أي حساب بنكي بعد. أضف حسابك البنكي لتسهيل عمليات الشحن.":"You haven't added any bank accounts yet. Add your bank account to facilitate top-up operations."}),e.jsxs(c,{onClick:()=>d(!0),className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-primary-foreground shadow-lg shadow-primary/20",children:[e.jsx(w,{className:"h-5 w-5 mr-2"}),a?"إضافة حسابك الأول":"Add Your First Account"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(s=>e.jsxs("div",{className:"p-5 rounded-xl bg-card border border-border hover:border-primary/50 transition-all group shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(b,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground",children:s.bankName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.accountName})]})]}),s.isDefault&&e.jsxs(V,{className:"bg-amber-500/10 text-amber-600 border-amber-500/20",children:[e.jsx(k,{className:"w-3 h-3 mr-1 fill-amber-600"}),a?"افتراضي":"Default"]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:a?"رقم الحساب":"Account Number"}),e.jsx("span",{className:"text-foreground font-mono text-sm",children:s.accountNumber})]}),s.iban&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground text-sm",children:"IBAN"}),e.jsx("span",{className:"text-foreground font-mono text-xs",children:s.iban})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{S(s),B(!0)},children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),a?"تعديل":"Edit"]}),e.jsx(c,{variant:"outline",size:"sm",className:"text-red-500 hover:text-red-600 hover:bg-red-500/10 border-red-500/20",onClick:()=>E(s.id),disabled:y===s.id,children:y===s.id?e.jsx(h,{className:"h-4 w-4 animate-spin"}):e.jsx(X,{className:"h-4 w-4"})})]})]},s.id))})})]})})}export{ee as default};
